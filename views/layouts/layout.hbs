<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{{title}}}</title>
    <script type="javascript" src="https://kit.fontawesome.com/e13fb8b113.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/assets/css/all.css">
    <link rel="stylesheet" href="/assets/css/foundation.css">
    <script src="https://unpkg.com/axios/dist/axios.min.js" type="javascript"></script>
</head>

<body>
    {{>menu}}
    {{#if chat}}
    {{>peerlist}}
    {{/if}}
    {{#if dashboard}}
    {{>controlpanel}}
    {{>contactform}}
    {{/if}}
    {{>messages}}

    <main class="grid-container fluid main">
        {{{body}}}
    </main>
    <script src="/assets/js/vendor.js" type="javascript"></script>
    <script src="/assets/js/foundation.js" type="javascript"></script>
    <script type="javascript">
         $(document).ready(function() {
            $(document).foundation();
         })       
    </script>
    <p class="lead float-center" style="margin:0;padding:20px;text-algin:center;">
        &copy; RMedia Technology
    </p>
</body>
<link rel="stylesheet" href="/assets/css/accordion.css">
<link rel="stylesheet" href="/assets/css/controlpanel.css">
<link rel="stylesheet" href="/assets/css/contact.css">
<link rel="stylesheet" href="/assets/css/landing.css">
<link rel="stylesheet" href="/assets/css/elements.css">
<link rel="stylesheet" href="/assets/css/dialog.css">
<link rel="stylesheet" href="/assets/css/containers.css">
<script src="/assets/js/utils.js" type="module"></script>

{{#if chat}}
<script src="/socket.io/socket.io.js"></script>
<link rel="stylesheet" href="/assets/css/chat/landing.css">
<link rel="stylesheet" href="/assets/css/chat/dialog.css">
<link rel="stylesheet" href="/assets/css/chat/containers.css">
<link rel="stylesheet" href="/assets/css/chat/controls.css">
<link rel="stylesheet" href="/assets/css/chat/elements.css">
<link rel="stylesheet" href="/assets/css/chat/utils.css">
<link rel="stylesheet" href="/assets/css/chat/containers.css">

<script src="/assets/js/chat/recordingutils.js" type="module"></script>
<script src="/assets/js/chat/elements.js" type="module"></script>
<script src="/assets/js/chat/constants.js" type="module"></script>
<script src="/assets/js/chat/ui.js" type="module"></script>
<script src="/assets/js/chat/wss.js" type="module"></script>
<script type="javascript">
    const getTurnServerCredentials = async () => {
        log(axios);
        const responseData = await axios.get("/api/get-turn-credentials");
        log("\n\n\tTURN Credentials\n" + JSON.stringify(responseData.data)+"\n\n");
        webRTCHandler.setTurnServers(responseData.data.iceServers);
    };

    getTurnServerCredentials()
    .then(() => {
        webRTCHandler.getLocalPreview();
    })
    .catch((err) => {
        log(err);
    });
</script>
<script src="/assets/js/chat/main.js" type="module"></script>
{{/if}}

{{#if user}}
<script src="/assets/js/dashboardelements.js" type="module"></script>
<script src="/assets/js/dashboardmain.js" type="module"></script>
{{else}}
<script src="/assets/js/authutils.js" type="module"></script>
{{/if}}

</html>